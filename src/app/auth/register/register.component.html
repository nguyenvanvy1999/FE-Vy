<h1 id="title" class="title">Sign Up</h1>

<form
  [nbSpinner]="isLoading"
  [formGroup]="registerForm"
  aria-labelledby="title"
>

  <div class="form-control-group">
    <label class="label" for="input-first-name">First Name:</label>
    <input
      nbInput
      formControlName="firstName"
      id="input-first-name"
      name="text"
      placeholder="First Name"
      fullWidth
      fieldSize="large"
      [status]="firstName.dirty ? (firstName.invalid ? 'danger' : 'success') : 'basic'"
      [attr.aria-invalid]="firstName.invalid && firstName.touched ? true : null"
    />
    <ng-container *ngIf="firstName.invalid && firstName.touched">
      <p class="caption status-danger" *ngIf="firstName.errors?.required">
        First Name is required!
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="input-last-name">Last Name:</label>
    <input
      nbInput
      formControlName="lastName"
      id="input-last-name"
      name="text"
      placeholder="Last Name"
      fullWidth
      fieldSize="large"
      [status]="lastName.dirty ? (lastName.invalid ? 'danger' : 'success') : 'basic'"
      [attr.aria-invalid]="lastName.invalid && lastName.touched ? true : null"
    />
    <ng-container *ngIf="lastName.invalid && lastName.touched">
      <p class="caption status-danger" *ngIf="lastName.errors?.required">
        Last Name is required!
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="input-email">Email address:</label>
    <input
      nbInput
      formControlName="email"
      id="input-email"
      name="email"
      pattern=".+@.+..+"
      placeholder="Email address"
      fullWidth
      fieldSize="large"
      [status]="email.dirty ? (email.invalid ? 'danger' : 'success') : 'basic'"
      [attr.aria-invalid]="email.invalid && email.touched ? true : null"
    />
    <ng-container *ngIf="email.invalid && email.touched">
      <p class="caption status-danger" *ngIf="email.errors?.required">
        Email is required!
      </p>
      <p class="caption status-danger" *ngIf="email.errors?.pattern">
        Email should be the real one!
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="input-password">Password:</label>
    <input
      nbInput
      type="password"
      id="input-password"
      name="password"
      placeholder="Password"
      formControlName="password"
      fullWidth
      fieldSize="large"
      [status]="
				password.dirty ? (password.invalid ? 'danger' : 'success') : 'basic'
			"
      [attr.aria-invalid]="password.invalid && password.touched ? true : null"
    />
    <ng-container *ngIf="password.invalid && password.touched">
      <p class="caption status-danger" *ngIf="password.errors?.required">
        Password is required!
      </p>
      <p
        class="caption status-danger"
        *ngIf="password.errors?.minlength || password.errors?.maxlength"
      >
        Password should contain at least 8 characters
      </p>
    </ng-container>
  </div>

  <div class="form-control-group">
    <label class="label" for="input-re-password">Repeat password:</label>
    <input
      nbInput
      type="password"
      id="input-re-password"
      name="confirmPassword"
      placeholder="Confirm Password"
      formControlName="confirmPassword"
      fullWidth
      fieldSize="large"
      [status]="
				confirmPassword.dirty
					? confirmPassword.invalid || password.value != confirmPassword.value
						? 'danger'
						: 'success'
					: 'basic'
			"
      [required]="true"
      [attr.aria-invalid]="
				confirmPassword.invalid && confirmPassword.touched ? true : null
			"
    />
    <ng-container *ngIf="confirmPassword.invalid && confirmPassword.touched">
      <p class="caption status-danger" *ngIf="confirmPassword.errors?.required">
        Password confirmation is required!
      </p>
      <p
        class="caption status-danger"
        *ngIf="
					confirmPassword.hasError('notMatch') &&
					!confirmPassword.errors?.required
				"
      >
        Password does not match the confirm password.
      </p>
    </ng-container>
  </div>


  <button
    type="button"
    id="sign-up"
    nbButton
    fullWidth
    status="primary"
    size="large"
    [disabled]="!registerForm.valid"
    (click)="register()"
  >
    Register
  </button>
</form>
